# Epic: USR-007 - Digital Flyer Viewer

## Epic Overview

| Field | Value |
|-------|-------|
| **Epic ID** | USR-007 |
| **Epic Title** | Digital Flyer Viewer |
| **Priority** | P0 (Critical) |
| **Status** | ğŸ“‹ PLANNED |
| **Estimated Effort** | 10 days |
| **Actual Effort** | - |
| **Phase** | Phase 1 - Traffic Acquisition |
| **Category** | USR - User App |

## Business Value

**íƒ€ìš´ì¸ì˜ í•µì‹¬ ê¸°ëŠ¥!** ë™ë„¤ ì „ë‹¨ì§€ë¥¼ ë””ì§€í„¸ë¡œ ëª¨ì•„ ë³´ì—¬ì£¼ì–´ ì‚¬ìš©ìê°€ í• ì¸ ì •ë³´ë¥¼ ë†“ì¹˜ì§€ ì•Šë„ë¡ í•©ë‹ˆë‹¤. ìƒì¸ì—ê²ŒëŠ” ê³ ê° ìœ ì… ì±„ë„ì„ ì œê³µí•©ë‹ˆë‹¤.

### Success Metrics
- ì „ë‹¨ì§€ ì¡°íšŒìœ¨ â‰¥ 80% (ì‚¬ìš©ìì˜ 80%ê°€ ì „ë‹¨ì§€ ì¡°íšŒ)
- ì¼í‰ê·  ì „ë‹¨ì§€ ì¡°íšŒ ìˆ˜ â‰¥ 5ê°œ/ì‚¬ìš©ì
- ì „ë‹¨ì§€ í´ë¦­ â†’ ìƒì  ë°©ë¬¸ ì „í™˜ìœ¨ â‰¥ 5%

## Epic Scope

âœ… ì „ë‹¨ì§€ í”¼ë“œ (í™ˆ í™”ë©´)
âœ… ì „ë‹¨ì§€ ìƒì„¸ ë³´ê¸°
âœ… ì¹´í…Œê³ ë¦¬ë³„ í•„í„°
âœ… ì§€ì—­ë³„ í•„í„° (3-Hub ì „í™˜)
âœ… ì „ë‹¨ì§€ ê²€ìƒ‰
âœ… ì „ë‹¨ì§€ ê³µìœ 
âœ… ì „ë‹¨ì§€ ì €ì¥ (ë¶ë§ˆí¬)
âœ… ìƒì  ì •ë³´ ì—°ê²°
âœ… ì „ë‹¨ì§€ ì¡°íšŒ ì´ë ¥
âœ… ì‹ ê·œ ì „ë‹¨ì§€ ì•Œë¦¼

## User Stories

### Story 7.1: ì „ë‹¨ì§€ í”¼ë“œ (í™ˆ í™”ë©´)
- ì¹´ë“œ í˜•ì‹ ì„¸ë¡œ ìŠ¤í¬ë¡¤ í”¼ë“œ
- ì „ë‹¨ì§€ ì¸ë„¤ì¼, ì œëª©, ìƒì ëª…, ê±°ë¦¬, ì¹´í…Œê³ ë¦¬
- ë¬´í•œ ìŠ¤í¬ë¡¤ (Pagination)
- Pull to Refresh
- **Story Points**: 5

### Story 7.2: ì „ë‹¨ì§€ ìƒì„¸ ë³´ê¸°
- ì „ë‹¨ì§€ ì´ë¯¸ì§€ (í™•ëŒ€ ê°€ëŠ¥)
- ì œëª©, ë‚´ìš©, í• ì¸ ì •ë³´
- ìœ íš¨ ê¸°ê°„
- ìƒì  ì •ë³´ (ì´ë¦„, ì£¼ì†Œ, ì „í™”ë²ˆí˜¸)
- ì§€ë„ ë¯¸ë¦¬ë³´ê¸°
- "ìƒì  ë³´ê¸°" ë²„íŠ¼
- **Story Points**: 5

### Story 7.3: ì¹´í…Œê³ ë¦¬ í•„í„°
- ì¹´í…Œê³ ë¦¬: ì „ì²´, ìŒì‹, ìƒí™œ, íŒ¨ì…˜, ë·°í‹°, êµìœ¡, ì˜ë£Œ
- ìƒë‹¨ ì¹´í…Œê³ ë¦¬ ì¹© (Horizontal Scroll)
- ì„ íƒí•œ ì¹´í…Œê³ ë¦¬ ì „ë‹¨ì§€ë§Œ í‘œì‹œ
- **Story Points**: 3

### Story 7.4: ì§€ì—­ í•„í„° (3-Hub ì „í™˜)
- ìƒë‹¨: ê±°ì£¼ì§€ / ì§ì¥ / ê°€ì¡±ì§‘ í† ê¸€
- ì„ íƒí•œ ì§€ì—­ ë°˜ê²½ 500m ì „ë‹¨ì§€ í‘œì‹œ
- ì§€ì—­ ì „í™˜ ì‹œ í”¼ë“œ ìƒˆë¡œê³ ì¹¨
- **Story Points**: 3

### Story 7.5: ì „ë‹¨ì§€ ê²€ìƒ‰
- ê²€ìƒ‰ ë°”: ìƒì ëª…, ì œëª©, ë‚´ìš© ê²€ìƒ‰
- ê²€ìƒ‰ì–´ ìë™ì™„ì„±
- ìµœê·¼ ê²€ìƒ‰ì–´ ì €ì¥
- **Story Points**: 5

### Story 7.6: ì „ë‹¨ì§€ ê³µìœ 
- ì¹´ì¹´ì˜¤í†¡, ë©”ì‹œì§€, URL ë³µì‚¬
- ê³µìœ  ë©”ì‹œì§€: "{ìƒì ëª…} ì „ë‹¨ì§€ - íƒ€ìš´ì¸"
- Deep Link (ì•± ì„¤ì¹˜ ìœ ë„)
- **Story Points**: 3

### Story 7.7: ì „ë‹¨ì§€ ì €ì¥ (ë¶ë§ˆí¬)
- í•˜íŠ¸ ì•„ì´ì½˜ (ì¦ê²¨ì°¾ê¸°)
- ì €ì¥ëœ ì „ë‹¨ì§€ ëª©ë¡ (ì„¤ì • > ì €ì¥ëœ ì „ë‹¨ì§€)
- **Story Points**: 3

### Story 7.8: ìƒì  ì •ë³´ í˜ì´ì§€
- ìƒì ëª…, ì£¼ì†Œ, ì „í™”ë²ˆí˜¸, ì˜ì—…ì‹œê°„
- í•´ë‹¹ ìƒì ì˜ ëª¨ë“  ì „ë‹¨ì§€ ëª©ë¡
- ì§€ë„ (ìœ„ì¹˜ í‘œì‹œ)
- "ì „í™” ê±¸ê¸°", "ê¸¸ì°¾ê¸°" ë²„íŠ¼
- **Story Points**: 5

### Story 7.9: ì „ë‹¨ì§€ ì¡°íšŒ ì´ë ¥
- ìµœê·¼ ë³¸ ì „ë‹¨ì§€ ëª©ë¡ (ìµœëŒ€ 50ê°œ)
- ë¡œì»¬ ì €ì¥ (SQLite)
- **Story Points**: 3

### Story 7.10: ì‹ ê·œ ì „ë‹¨ì§€ í‘¸ì‹œ ì•Œë¦¼
- ìƒˆ ì „ë‹¨ì§€ ë“±ë¡ ì‹œ í‘¸ì‹œ ì•Œë¦¼
- ì§€ì—­ + ì¹´í…Œê³ ë¦¬ ê¸°ë°˜ íƒ€ê²ŸíŒ…
- "ìƒˆ ì „ë‹¨ì§€ {ìƒì ëª…} - {ì œëª©}"
- **Story Points**: 5

## Technical Specifications

### API Endpoints
```
GET /api/flyers?regionId=...&category=food&page=1&limit=20
GET /api/flyers/:id
GET /api/flyers/search?q=ì¹˜í‚¨
POST /api/flyers/:id/view (ì¡°íšŒ ì´ë ¥)
POST /api/flyers/:id/bookmark
GET /api/merchants/:id (ìƒì  ì •ë³´)
```

### Database Schema (Backend)
```sql
CREATE TABLE flyers (
  id UUID PRIMARY KEY,
  merchant_id UUID REFERENCES merchants(id),
  title VARCHAR(200) NOT NULL,
  content TEXT,
  image_url TEXT NOT NULL,
  category VARCHAR(50),
  location GEOMETRY(POINT, 4326),
  region_id UUID REFERENCES regions(id),
  valid_from DATE,
  valid_until DATE,
  status VARCHAR(20) CHECK (status IN ('pending', 'approved', 'rejected', 'expired')),
  view_count INT DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE flyer_views (
  id UUID PRIMARY KEY,
  flyer_id UUID REFERENCES flyers(id),
  user_id UUID REFERENCES users(id),
  viewed_at TIMESTAMP DEFAULT NOW()
);

CREATE TABLE flyer_bookmarks (
  user_id UUID REFERENCES users(id),
  flyer_id UUID REFERENCES flyers(id),
  created_at TIMESTAMP DEFAULT NOW(),
  PRIMARY KEY (user_id, flyer_id)
);
```

### State Management (Riverpod)
```dart
class FlyerFeedState {
  final List<Flyer> flyers;
  final String? selectedCategory;
  final String? selectedLocationId; // home, work, family
  final int page;
  final bool hasMore;
  final bool isLoading;
}

class FlyerFeedNotifier extends StateNotifier<FlyerFeedState> {
  Future<void> loadFlyers({bool loadMore = false});
  void setCategory(String category);
  void setLocation(String locationId);
  Future<void> searchFlyers(String query);
  Future<void> toggleBookmark(String flyerId);
}
```

### Screen Layout
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ê±°ì£¼ì§€â–¼] [ì „ì²´â–¼] ğŸ” âš™ï¸      â”‚ â† AppBar (ìœ„ì¹˜/ì¹´í…Œê³ ë¦¬)
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ìŒì‹][ìƒí™œ][íŒ¨ì…˜][ë·°í‹°]...  â”‚ â† ì¹´í…Œê³ ë¦¬ ì¹©
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ ì „ë‹¨ì§€ ì´ë¯¸ì§€         â”‚ â”‚
â”‚ â”‚ ì¹˜í‚¨ 2ë§ˆë¦¬ 50% í• ì¸      â”‚ â”‚
â”‚ â”‚ ğŸª ì¹˜í‚¨ë§ˆì„ Â· 125m Â· ìŒì‹ â”‚ â”‚
â”‚ â”‚ â¤ï¸ 45                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“„ ì „ë‹¨ì§€ ì´ë¯¸ì§€         â”‚ â”‚
â”‚ â”‚ ...                     â”‚ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[ì „ë‹¨ì§€ ìƒì„¸ í™”ë©´]
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† ì „ë‹¨ì§€        â¤ï¸ ê³µìœ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ì „ë‹¨ì§€ ì´ë¯¸ì§€ (í™•ëŒ€ ê°€ëŠ¥)]  â”‚
â”‚                             â”‚
â”‚ ì¹˜í‚¨ 2ë§ˆë¦¬ 50% í• ì¸          â”‚
â”‚ ğŸª ì¹˜í‚¨ë§ˆì„                 â”‚
â”‚ ğŸ“… ~2025.12.31              â”‚
â”‚                             â”‚
â”‚ ğŸ“ ìƒì„¸ ë‚´ìš©:               â”‚
â”‚ í›„ë¼ì´ë“œ + ì–‘ë… 2ë§ˆë¦¬ 19,900ì›â”‚
â”‚                             â”‚
â”‚ ğŸ“ ì„œìš¸ì‹œ ì¢…ë¡œêµ¬ ì„¸ì¢…ëŒ€ë¡œ... â”‚
â”‚ ğŸ“ 02-1234-5678             â”‚
â”‚ ğŸ• 10:00 - 22:00            â”‚
â”‚                             â”‚
â”‚ [ì§€ë„ ë¯¸ë¦¬ë³´ê¸°]             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ìƒì  ë³´ê¸°] [ì „í™”í•˜ê¸°] [ê¸¸ì°¾ê¸°]â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Testing Strategy
- Unit Tests: ì¹´í…Œê³ ë¦¬ í•„í„°ë§, ê±°ë¦¬ ê³„ì‚°
- Widget Tests: ì „ë‹¨ì§€ ì¹´ë“œ, ìƒì„¸ í™”ë©´
- Integration Tests: í”¼ë“œ ë¡œë”© â†’ ìƒì„¸ ë³´ê¸° í”Œë¡œìš°
- E2E Tests: ì „ë‹¨ì§€ ê²€ìƒ‰ â†’ ë¶ë§ˆí¬ â†’ ê³µìœ 

## Dependencies
- CORE-001 (Auth), CORE-002 (Geospatial), CORE-004 (í‘¸ì‹œ ì•Œë¦¼), CORE-005 (ì´ë¯¸ì§€)
- USR-002 (3-Hub ìœ„ì¹˜)
- MRC-003 (ì „ë‹¨ì§€ ë“±ë¡)

## Future Enhancements
### Phase 2
- ì „ë‹¨ì§€ ëŒ“ê¸€/ë¦¬ë·°
- ì „ë‹¨ì§€ ì¢‹ì•„ìš” ìˆ˜ í‘œì‹œ
- AI ì¶”ì²œ ì „ë‹¨ì§€ (ê´€ì‹¬ì‚¬ ê¸°ë°˜)

### Phase 3
- ì¿ í° ë‹¤ìš´ë¡œë“œ (ë””ì§€í„¸ ì¿ í°)
- ì „ë‹¨ì§€ ì‚¬ìš© ì¸ì¦ (QR ì½”ë“œ)
