<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Townin Platform - ì „ì²´ ì‹œìŠ¤í…œ ë°ëª¨</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Noto Sans KR', sans-serif;
            background: #f5f5f5;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8em;
            font-weight: 800;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .badge {
            padding: 6px 12px;
            background: rgba(255,255,255,0.2);
            border-radius: 15px;
            font-size: 0.9em;
        }

        .btn-logout {
            padding: 8px 16px;
            background: white;
            color: #667eea;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
        }

        .container {
            max-width: 1400px;
            margin: 30px auto;
            padding: 0 20px;
        }

        .dashboard {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            margin-bottom: 20px;
        }

        .dashboard h2 {
            margin-bottom: 20px;
            color: #333;
            padding-bottom: 10px;
            border-bottom: 3px solid #667eea;
        }

        .stat-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .stat-card {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%);
            padding: 20px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-card .number {
            font-size: 2.5em;
            font-weight: 800;
            color: #667eea;
            margin-bottom: 5px;
        }

        .stat-card .label {
            color: #666;
            font-size: 0.95em;
        }

        .table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .table th {
            background: #f8f9fa;
            padding: 12px;
            text-align: left;
            font-weight: 600;
            color: #333;
            border-bottom: 2px solid #e0e0e0;
        }

        .table td {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
            color: #666;
        }

        .table tr:hover {
            background: #f8f9fa;
        }

        .status-badge {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }

        .status-open { background: #d4edda; color: #155724; }
        .status-closed { background: #f8d7da; color: #721c24; }
        .status-active { background: #d1ecf1; color: #0c5460; }

        .section {
            margin-bottom: 30px;
        }

        .map-preview {
            background: #e9ecef;
            height: 300px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 1.1em;
            margin: 20px 0;
        }

        .btn {
            padding: 10px 20px;
            background: #667eea;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            margin: 5px;
        }

        .btn:hover {
            background: #5568d3;
        }

        .btn-secondary {
            background: #6c757d;
        }

        .btn-secondary:hover {
            background: #5a6268;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .chart-placeholder {
            background: white;
            border: 2px dashed #e0e0e0;
            height: 250px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #999;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">Townin</div>
            <div class="user-info">
                <span id="userEmail">-</span>
                <span class="badge" id="userRole">-</span>
                <button class="btn-logout" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </div>

    <div class="container" id="dashboardContainer">
        <!-- ëŒ€ì‹œë³´ë“œ ë‚´ìš©ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ë¡œë“œë©ë‹ˆë‹¤ -->
    </div>

    <script>
        // ê°€ìƒ ë°ì´í„°ë² ì´ìŠ¤ (ë©”ëª¨ë¦¬)
        const mockDB = {
            currentUser: null,
            users: [
                { id: 1, email: 'admin@townin.kr', role: 'super_admin', ageRange: '35-44', householdType: 'couple' },
                { id: 2, email: 'municipality@uijeongbu.go.kr', role: 'municipality', ageRange: '40-49', householdType: 'family_young' },
                { id: 3, email: 'guard1@townin.kr', role: 'security_guard', ageRange: '30-39', householdType: 'couple', district: 'ì˜ì •ë¶€ë™', earnings: 45000, adViews: 900 },
                { id: 4, email: 'guard2@townin.kr', role: 'security_guard', ageRange: '35-44', householdType: 'family_young', district: 'ê°€ëŠ¥ë™', earnings: 62500, adViews: 1250 },
                { id: 5, email: 'guard3@townin.kr', role: 'security_guard', ageRange: '25-34', householdType: 'single', district: 'í˜¸ì›ë™', earnings: 38000, adViews: 760 },
                { id: 6, email: 'user1@example.com', role: 'user', ageRange: '30-39', householdType: 'family_young', district: 'ì˜ì •ë¶€ë™', points: 1250 },
                { id: 7, email: 'user2@example.com', role: 'user', ageRange: '35-44', householdType: 'couple', district: 'ê°€ëŠ¥ë™', points: 875 },
                { id: 8, email: 'user3@example.com', role: 'user', ageRange: '25-34', householdType: 'single', district: 'í˜¸ì›ë™', points: 625 },
                { id: 9, email: 'user4@example.com', role: 'user', ageRange: '45-54', householdType: 'family_senior', district: 'ì‹ ê³¡ë™', points: 450 },
                { id: 10, email: 'user5@example.com', role: 'user', ageRange: '55-64', householdType: 'couple', district: 'ì†¡ì‚°ë™', points: 325 }
            ],
            municipalities: [
                { id: 1, name: 'ì˜ì •ë¶€ì‹œ', province: 'ê²½ê¸°ë„', users: 245, merchants: 87, flyers: 156, livabilityIndex: 87.5 }
            ],
            gridCells: [
                { code: 'uijeongbu_01', district: 'ì˜ì •ë¶€ë™', users: 65, merchants: 25, propertyTier: 3 },
                { code: 'uijeongbu_02', district: 'ê°€ëŠ¥ë™', users: 80, merchants: 32, propertyTier: 4 },
                { code: 'uijeongbu_03', district: 'í˜¸ì›ë™', users: 55, merchants: 18, propertyTier: 3 },
                { code: 'uijeongbu_04', district: 'ì‹ ê³¡ë™', users: 25, merchants: 7, propertyTier: 2 },
                { code: 'uijeongbu_05', district: 'ì†¡ì‚°ë™', users: 20, merchants: 5, propertyTier: 4 }
            ],
            merchants: [
                { id: 1, name: 'ì˜ì •ë¶€ ìŠˆí¼ë§ˆì¼“', category: 'ì‹ë£Œí’ˆ', district: 'ì˜ì •ë¶€ë™', status: 'open', flyers: 3, views: 450 },
                { id: 2, name: 'ê°€ëŠ¥ë™ ì¹˜í‚¨', category: 'ìŒì‹ì ', district: 'ê°€ëŠ¥ë™', status: 'open', flyers: 2, views: 380 },
                { id: 3, name: 'í˜¸ì› í™”ì¥í’ˆ', category: 'í™”ì¥í’ˆ', district: 'í˜¸ì›ë™', status: 'closed', flyers: 1, views: 120 }
            ],
            safetyData: [
                { type: 'CCTV', name: 'ì˜ì •ë¶€ì—­ ì• CCTV', district: 'ì˜ì •ë¶€ë™', address: 'ê²½ê¸° ì˜ì •ë¶€ì‹œ ì˜ì •ë¶€ë™ 123' },
                { type: 'CCTV', name: 'ê°€ëŠ¥ë™ ì£¼ë¯¼ì„¼í„° CCTV', district: 'ê°€ëŠ¥ë™', address: 'ê²½ê¸° ì˜ì •ë¶€ì‹œ ê°€ëŠ¥ë™ 456' },
                { type: 'ê°€ë¡œë“±', name: 'ì˜ì •ë¶€ë™ ê°€ë¡œë“± 1', district: 'ì˜ì •ë¶€ë™', address: 'ê²½ê¸° ì˜ì •ë¶€ì‹œ ì˜ì •ë¶€ë™ 125' },
                { type: 'ê°€ë¡œë“±', name: 'í˜¸ì›ë™ ê°€ë¡œë“± 12', district: 'í˜¸ì›ë™', address: 'ê²½ê¸° ì˜ì •ë¶€ì‹œ í˜¸ì›ë™ 789' },
                { type: 'ì£¼ì°¨ì¥', name: 'ì˜ì •ë¶€ì—­ ê³µì˜ì£¼ì°¨ì¥', district: 'ì˜ì •ë¶€ë™', address: 'ê²½ê¸° ì˜ì •ë¶€ì‹œ ì˜ì •ë¶€ë™ 130' }
            ]
        };

        // ì„¸ì…˜ ì²´í¬
        function checkSession() {
            const userEmail = localStorage.getItem('townin_user_email');
            if (!userEmail) {
                window.location.href = 'demo-login.html';
                return null;
            }
            return mockDB.users.find(u => u.email === userEmail);
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            localStorage.removeItem('townin_user_email');
            window.location.href = 'demo-login.html';
        }

        // ëŒ€ì‹œë³´ë“œ ë Œë”ë§
        function renderDashboard() {
            const user = checkSession();
            if (!user) return;

            mockDB.currentUser = user;
            document.getElementById('userEmail').textContent = user.email;
            document.getElementById('userRole').textContent = getRoleLabel(user.role);

            const container = document.getElementById('dashboardContainer');

            switch(user.role) {
                case 'super_admin':
                    container.innerHTML = renderSuperAdminDashboard();
                    break;
                case 'municipality':
                    container.innerHTML = renderMunicipalityDashboard();
                    break;
                case 'security_guard':
                    container.innerHTML = renderSecurityGuardDashboard(user);
                    break;
                case 'user':
                    container.innerHTML = renderUserDashboard(user);
                    break;
            }
        }

        function getRoleLabel(role) {
            const labels = {
                'super_admin': 'ìŠˆí¼ê´€ë¦¬ì',
                'municipality': 'ìì¹˜ì²´ê´€ë¦¬',
                'security_guard': 'ì§€ì—­ê´€ë¦¬ì',
                'user': 'ì¼ë°˜ ì‚¬ìš©ì'
            };
            return labels[role] || role;
        }

        // ìŠˆí¼ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ
        function renderSuperAdminDashboard() {
            const totalUsers = mockDB.users.filter(u => u.role === 'user').length;
            const totalGuards = mockDB.users.filter(u => u.role === 'security_guard').length;
            const totalMerchants = mockDB.merchants.length;
            const totalCities = mockDB.municipalities.length;

            return `
                <div class="dashboard">
                    <h2>ğŸ¯ ìŠˆí¼ê´€ë¦¬ì ëŒ€ì‹œë³´ë“œ</h2>

                    <div class="alert alert-success">
                        âœ… ì‹œìŠ¤í…œì´ ì •ìƒì ìœ¼ë¡œ ìš´ì˜ë˜ê³  ìˆìŠµë‹ˆë‹¤. ì „ì²´ ${totalUsers}ëª…ì˜ ì‚¬ìš©ìê°€ í™œë™ ì¤‘ì…ë‹ˆë‹¤.
                    </div>

                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="number">${totalUsers}</div>
                            <div class="label">ì´ ì‚¬ìš©ì</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${totalMerchants}</div>
                            <div class="label">ì´ ìƒì¸</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${totalGuards}</div>
                            <div class="label">í™œì„± ë³´ì•ˆê´€</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${totalCities}</div>
                            <div class="label">í™œì„± ì§€ì—­</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸ›ï¸ ìì¹˜ì²´ ê´€ë¦¬</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ìì¹˜ì²´ëª…</th>
                                <th>ë„/ì‹œ</th>
                                <th>ì‚¬ìš©ì</th>
                                <th>ìƒì¸</th>
                                <th>ì „ë‹¨ì§€</th>
                                <th>ì‚´ê¸°ì¢‹ì€ì§€ìˆ˜</th>
                                <th>ê´€ë¦¬</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${mockDB.municipalities.map(m => `
                                <tr>
                                    <td><strong>${m.name}</strong></td>
                                    <td>${m.province}</td>
                                    <td>${m.users}ëª…</td>
                                    <td>${m.merchants}ê°œ</td>
                                    <td>${m.flyers}ì¥</td>
                                    <td><strong style="color: #667eea">${m.livabilityIndex}/100</strong></td>
                                    <td><button class="btn btn-secondary">ìƒì„¸ë³´ê¸°</button></td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    <button class="btn">+ ìƒˆ ìì¹˜ì²´ ì¶”ê°€</button>
                </div>

                <div class="dashboard">
                    <h2>ğŸ‘® ë³´ì•ˆê´€ ê´€ë¦¬</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ì´ë©”ì¼</th>
                                <th>ë‹´ë‹¹ êµ¬ì—­</th>
                                <th>ì´ë²ˆ ë‹¬ ìˆ˜ìµ</th>
                                <th>ì „ë‹¨ì§€ ì¡°íšŒìˆ˜</th>
                                <th>í‰ê°€</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${mockDB.users.filter(u => u.role === 'security_guard').map(g => `
                                <tr>
                                    <td>${g.email}</td>
                                    <td><strong>${g.district}</strong></td>
                                    <td style="color: #28a745">â‚©${g.earnings.toLocaleString()}</td>
                                    <td>${g.adViews}ê±´</td>
                                    <td>${'â­'.repeat(Math.floor(g.earnings / 10000))}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    <button class="btn">+ ìƒˆ ë³´ì•ˆê´€ ì„ëª…</button>
                </div>
            `;
        }

        // ìì¹˜ì²´ê´€ë¦¬ ëŒ€ì‹œë³´ë“œ
        function renderMunicipalityDashboard() {
            const muni = mockDB.municipalities[0];

            return `
                <div class="dashboard">
                    <h2>ğŸ“ ì˜ì •ë¶€ì‹œ ëŒ€ì‹œë³´ë“œ</h2>

                    <div class="alert alert-info">
                        ë‹´ë‹¹ì: municipality@uijeongbu.go.kr | ê²½ê¸°ë„ ì˜ì •ë¶€ì‹œ
                    </div>

                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="number">${muni.users}</div>
                            <div class="label">ì´ ì‚¬ìš©ì</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${muni.merchants}</div>
                            <div class="label">ì´ ìƒì¸</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${muni.flyers}</div>
                            <div class="label">í™œì„± ì „ë‹¨ì§€</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${muni.livabilityIndex}</div>
                            <div class="label">ì‚´ê¸°ì¢‹ì€ë™ë„¤ì§€ìˆ˜</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸ—ºï¸ ì§€ì—­ë³„ í˜„í™©</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>êµ¬ì—­ ì½”ë“œ</th>
                                <th>ì§€ì—­</th>
                                <th>ì‚¬ìš©ì</th>
                                <th>ìƒì¸</th>
                                <th>Property Tier</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${mockDB.gridCells.map(g => `
                                <tr>
                                    <td><code>${g.code}</code></td>
                                    <td><strong>${g.district}</strong></td>
                                    <td>${g.users}ëª…</td>
                                    <td>${g.merchants}ê°œ</td>
                                    <td>${'â˜…'.repeat(g.propertyTier)}</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>

                <div class="dashboard">
                    <h2>ğŸ‘® ë³´ì•ˆê´€ ì„±ê³¼</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ë³´ì•ˆê´€</th>
                                <th>ë‹´ë‹¹ êµ¬ì—­</th>
                                <th>ì´ë²ˆ ë‹¬ ìˆ˜ìµ</th>
                                <th>ì „ë‹¨ì§€ ì¡°íšŒìˆ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${mockDB.users.filter(u => u.role === 'security_guard').map(g => `
                                <tr>
                                    <td>${g.district} ë³´ì•ˆê´€</td>
                                    <td>${g.district}</td>
                                    <td style="color: #28a745">â‚©${g.earnings.toLocaleString()}</td>
                                    <td>${g.adViews}ê±´</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                </div>

                <div class="dashboard">
                    <h2>ğŸ›¡ï¸ ì•ˆì „ ë°ì´í„° ê´€ë¦¬</h2>
                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="number">${mockDB.safetyData.filter(s => s.type === 'CCTV').length}</div>
                            <div class="label">CCTV</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${mockDB.safetyData.filter(s => s.type === 'ê°€ë¡œë“±').length}</div>
                            <div class="label">ê°€ë¡œë“±</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${mockDB.safetyData.filter(s => s.type === 'ì£¼ì°¨ì¥').length}</div>
                            <div class="label">ê³µì˜ì£¼ì°¨ì¥</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">0</div>
                            <div class="label">ì¹¨ìˆ˜ìœ„í—˜êµ¬ì—­</div>
                        </div>
                    </div>
                    <button class="btn">+ ìƒˆ ì•ˆì „ ë°ì´í„° ì¶”ê°€</button>
                </div>

                <div class="dashboard">
                    <h2>ğŸ“ˆ ì›”ê°„ íŠ¸ë Œë“œ</h2>
                    <div class="chart-placeholder">
                        ğŸ“Š ì‚¬ìš©ì ì¦ê°€ ì¶”ì´ ì°¨íŠ¸<br/>
                        (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” Chart.jsë¡œ êµ¬í˜„)
                    </div>
                </div>
            `;
        }

        // ë³´ì•ˆê´€ ëŒ€ì‹œë³´ë“œ
        function renderSecurityGuardDashboard(user) {
            const myMerchants = mockDB.merchants.filter(m => m.district === user.district);
            const myGrid = mockDB.gridCells.find(g => g.district === user.district);

            return `
                <div class="dashboard">
                    <h2>ğŸ‘® ${user.district} ë³´ì•ˆê´€ ëŒ€ì‹œë³´ë“œ</h2>

                    <div class="alert alert-success">
                        ë±ƒì§€: ${user.district} ë³´ì•ˆê´€ | ë‹´ë‹¹ êµ¬ì—­: ${user.district} (${myGrid.code})
                    </div>

                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="number">â‚©${user.earnings.toLocaleString()}</div>
                            <div class="label">ì´ë²ˆ ë‹¬ ìˆ˜ìµ</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${user.adViews}</div>
                            <div class="label">ì „ë‹¨ì§€ ì¡°íšŒìˆ˜</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${myGrid.users}</div>
                            <div class="label">ë‹´ë‹¹ êµ¬ì—­ ì‚¬ìš©ì</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${myGrid.merchants}</div>
                            <div class="label">ë‹´ë‹¹ êµ¬ì—­ ìƒì¸</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸª ìš°ë¦¬ êµ¬ì—­ ìƒì¸</h2>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ìƒí˜¸ëª…</th>
                                <th>ì¹´í…Œê³ ë¦¬</th>
                                <th>ìƒíƒœ</th>
                                <th>í™œì„± ì „ë‹¨ì§€</th>
                                <th>ì¡°íšŒìˆ˜</th>
                            </tr>
                        </thead>
                        <tbody>
                            ${myMerchants.map(m => `
                                <tr>
                                    <td><strong>${m.name}</strong></td>
                                    <td>${m.category}</td>
                                    <td><span class="status-badge status-${m.status}">${m.status === 'open' ? 'ì˜ì—…ì¤‘' : 'íœ´ì—…'}</span></td>
                                    <td>${m.flyers}ì¥</td>
                                    <td>${m.views}íšŒ</td>
                                </tr>
                            `).join('')}
                        </tbody>
                    </table>
                    <button class="btn">+ ìƒˆ ìƒì¸ ë“±ë¡í•˜ê¸°</button>
                </div>

                <div class="dashboard">
                    <h2>ğŸ“Š ì´ë²ˆ ì£¼ ì„±ê³¼</h2>
                    <div class="chart-placeholder">
                        ğŸ“ˆ ì¼ë³„ ì „ë‹¨ì§€ ì¡°íšŒìˆ˜ ê·¸ë˜í”„<br/>
                        (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” ì‹¤ì‹œê°„ ì°¨íŠ¸ í‘œì‹œ)
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸ¯ ì´ë²ˆ ì£¼ í•  ì¼</h2>
                    <div style="padding: 20px;">
                        <label style="display: block; margin: 10px 0;">
                            <input type="checkbox"> ì‹ ê·œ ìƒì¸ 3ê³³ ë°©ë¬¸ ì˜ˆì •
                        </label>
                        <label style="display: block; margin: 10px 0;">
                            <input type="checkbox" checked> ì´ë²ˆ ì£¼ ì „ë‹¨ì§€ í™ë³´ ì™„ë£Œ
                        </label>
                        <label style="display: block; margin: 10px 0;">
                            <input type="checkbox"> ì£¼ë¯¼ ì»¤ë®¤ë‹ˆí‹°ì— ì•ˆë‚´ ê²Œì‹œ
                        </label>
                    </div>
                </div>
            `;
        }

        // ì¼ë°˜ ì‚¬ìš©ì ëŒ€ì‹œë³´ë“œ
        function renderUserDashboard(user) {
            const myDistrict = user.district;
            const mySafetyData = mockDB.safetyData.filter(s => s.district === myDistrict);
            const nearbyMerchants = mockDB.merchants.filter(m => m.district === myDistrict);

            return `
                <div class="dashboard">
                    <h2>ğŸ  Townin</h2>

                    <div class="alert alert-info">
                        ğŸ“ í˜„ì¬ ìœ„ì¹˜: ${myDistrict} | ğŸ’° ë‚´ í¬ì¸íŠ¸: â‚©${user.points.toLocaleString()}
                    </div>

                    <div style="display: flex; gap: 10px; margin: 15px 0;">
                        <button class="btn">ğŸ  ì§‘</button>
                        <button class="btn btn-secondary">ğŸ¢ íšŒì‚¬</button>
                        <button class="btn btn-secondary">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ë³¸ê°€</button>
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸ—ºï¸ ìš°ë¦¬ ë™ë„¤ ì•ˆì „ ì§€ë„</h2>
                    <div class="map-preview">
                        ğŸ—ºï¸ ì§€ë„ ì˜ì—­ (ì‹¤ì œ í™˜ê²½ì—ì„œëŠ” Google Maps API ì‚¬ìš©)<br/>
                        ${myDistrict} ì¤‘ì‹¬ - CCTV ${mySafetyData.filter(s => s.type === 'CCTV').length}ê°œ, ê°€ë¡œë“± ì¼œì§ ìƒíƒœ
                    </div>

                    <div class="stat-grid">
                        <div class="stat-card">
                            <div class="number">${mySafetyData.filter(s => s.type === 'CCTV').length}</div>
                            <div class="label">ğŸ“¹ CCTV</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${mySafetyData.filter(s => s.type === 'ê°€ë¡œë“±').length}</div>
                            <div class="label">ğŸ’¡ ê°€ë¡œë“±</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">${mySafetyData.filter(s => s.type === 'ì£¼ì°¨ì¥').length}</div>
                            <div class="label">ğŸ…¿ï¸ ì£¼ì°¨ì¥</div>
                        </div>
                        <div class="stat-card">
                            <div class="number">0</div>
                            <div class="label">âš ï¸ ìœ„í—˜êµ¬ì—­</div>
                        </div>
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸ“° ì˜¤ëŠ˜ì˜ ì „ë‹¨ì§€</h2>
                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
                        ${nearbyMerchants.map(m => `
                            <div style="border: 2px solid #e0e0e0; border-radius: 10px; padding: 20px; text-align: center;">
                                <div style="background: #f8f9fa; height: 150px; border-radius: 8px; margin-bottom: 15px; display: flex; align-items: center; justify-content: center; color: #999;">
                                    ğŸ–¼ï¸ ì „ë‹¨ì§€ ì´ë¯¸ì§€
                                </div>
                                <h3 style="margin: 10px 0;">${m.name}</h3>
                                <p style="color: #666; margin: 5px 0;">${m.category}</p>
                                <p style="color: #28a745; font-weight: 600; margin: 10px 0;">â‚©25 ì ë¦½</p>
                                <button class="btn" onclick="viewFlyer('${m.name}')">ì „ë‹¨ì§€ ë³´ê¸°</button>
                            </div>
                        `).join('')}
                    </div>
                </div>

                <div class="dashboard">
                    <h2>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§ ê°€ì¡± ì¼€ì–´</h2>
                    <div style="padding: 20px; background: #f8f9fa; border-radius: 10px;">
                        <h3 style="margin-bottom: 15px;">ì–´ë¨¸ë‹ˆ (ë³¸ê°€)</h3>
                        <div class="alert alert-success">
                            ğŸ˜Š ì˜¤ëŠ˜ í™œë™ì ì´ì‹œë„¤ìš”!<br/>
                            ìµœê·¼ í™œë™: 2ì‹œê°„ ì „
                        </div>
                        <button class="btn btn-secondary">ìƒì„¸ ë³´ê¸°</button>
                    </div>
                </div>
            `;
        }

        function viewFlyer(merchantName) {
            const user = mockDB.currentUser;
            user.points += 25;
            alert(`âœ… ${merchantName} ì „ë‹¨ì§€ë¥¼ í™•ì¸í–ˆìŠµë‹ˆë‹¤!\n\nğŸ’° â‚©25 í¬ì¸íŠ¸ ì ë¦½\ní˜„ì¬ í¬ì¸íŠ¸: â‚©${user.points.toLocaleString()}`);
            renderDashboard();
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        window.onload = renderDashboard;
    </script>
</body>
</html>
